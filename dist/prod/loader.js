!function(e,t){"function"==typeof define&&define.amd?define("templating/utils",[],t):"object"==typeof exports?module.exports=t():(e.Templating=e.Templating||{},e.Templating.utils=t())}(this,function(){return{merge:function(e,t){Object.keys(t).forEach(function(n){e[n]=t[n]})}}}),function(e,t){"function"==typeof define&&define.amd?define("coders/component/CpDecoder",["templating/Decoder"],t):"object"==typeof exports?module.exports=t(require("./Decoder")):(e.Templating=e.Templating||{},e.Templating.componentDecoder=t(e.Templating.Decoder))}(this,function(e){var t={tagName:"cp",decode:function(e,t){var n=e.data;n.attribs={};var i={name:n.name,tmpEl:function(e,o){return i.data.instance=new n.src(n.dataset,t,o),n.instance.el},data:n||{}};return void 0!==n.dataset.bind&&(i.bind=n.dataset.bind),i}};return e&&e.addDecoder(t),t});;!function(e,n){"function"==typeof define&&define.amd?define("coders/placeholders/plDecoder",["templating/Decoder"],n):"object"==typeof exports?module.exports=n(require("./Decoder")):(e.Templating=e.Templating||{},e.Templating.componentDecoder=n(e.Templating.Decoder))}(this,function(e){var n={tagName:"pl",decode:function(e,n){var t=e.data;return{name:t.name,tmpEl:function(e){return e||document.createElement(t.tag)},parse:function(e){n&&Object.keys(n).forEach(function(t){n[t].run(e)})},data:t}}};return e&&e.addDecoder(n),n});;!function(e,t){"function"==typeof define&&define.amd?define("coders/databind/bdDecoder",["templating/Decoder"],t):"object"==typeof exports?module.exports=t(require("./Decoder")):(e.Templating=e.Templating||{},e.Templating.componentDecoder=t(e.Templating.Decoder))}(this,function(e){var t={tagName:"bd",noAttach:!0,decode:function(e){var t=this.data=e.data,n={name:t.name,tmpEl:function(){return document.createElement(t.tag)},data:t,bind:t.dataset.bind||t.name};return n}};return e&&e.addDecoder(t),t});;!function(e,t){"function"==typeof define&&define.amd?define("coders/router/RouterDecoder",["templating/Decoder"],t):"object"==typeof exports?module.exports=t(require("./Decoder")):(e.Templating=e.Templating||{},e.Templating.componentDecoder=t(e.Templating.Decoder))}(this,function(e){var t={tagName:"rt",noAttach:!0,decode:function(e,t){var n=e.data,o={name:n.name,tmpEl:function(e){return e||document.createElement(n.tag)},parse:function(e){t&&Object.keys(t).forEach(function(n){t[n].run(e)})},data:n||{},route:n.route};return o}};return e&&e.addDecoder(t),t});;!function(e,t){"function"==typeof define&&define.amd?define("coders/style/styleDecoder",["templating/Decoder"],t):"object"==typeof exports?module.exports=t(require("./Decoder")):(e.Templating=e.Templating||{},e.Templating.componentDecoder=t(e.Templating.Decoder))}(this,function(e){var t={tagName:"style",decode:function(e){if(void 0===e.data.styleAttached){e.data.styleAttached=!0;var t=document.createElement("style");t.innerHTML=e.data.style,document.head.appendChild(t)}}};return e&&e.addDecoder(t),t});;!function(t,e){"function"==typeof define&&define.amd?define("templating/Decoder",["templating/utils"],e):"object"==typeof exports?module.exports=e(require("./utils")):(t.Templating=t.Templating||{},t.Templating.Decoder=e(t.Templating.utils))}(this,function(t){function e(t,e){var n;n="li"===e?"ul":"td"===e||"th"===e?"tr":"tr"===e?"tbody":"div";var i=document.createElement(n),r=document.createDocumentFragment();return i.innerHTML=t,r.appendChild(i.firstChild),r.firstChild}function n(t,n,i,r){var a=this.tmpEl(n?t:!1,r),d=this.data.attribs,o=e(this.template,this.data.tag);if(n||Object.keys(d).forEach(function(t){a.setAttribute(t,d[t])}),void 0!==o)for(;o.childNodes.length>0;)a.appendChild(o.childNodes[0]);if(i)this.setParent(i),null!==this.parent&&this.parent.appendChild(a);else{var c=t.parentNode;this.setParent(c),(null!==this.parent||void 0!==this.parent)&&this.parent.replaceChild(a,t)}return this.el=a,void 0!==this.parse&&this.parse(a),a}function i(e,i,r){var a=e.tagName,d=this;t.merge(d,{id:e.id,template:e.template,noAttach:o[a].noAttach||e.data.tplSet.noattach,applyAttach:function(){delete this.noAttach},setParent:function(t){this.parent=t}.bind(d),getParent:function(){return this.parent}.bind(d),run:function(t,e,i,a){if(void 0===this.noAttach){var o=t.querySelector("#"+this.id)||t;if(o)return n.call(d,o,e,i,a||r)}}}),i&&(this.children=i)}function r(t,e){e||(e={});var n=!1,d=!1;return t.children.forEach(function(t){if(t.children&&t.children.length>0){var c=e[t.data.name]?e[t.data.name]:e;d=r.call(this,t,c)}var l=t.tagName;if(l){var h=o[l].decode(t,d,a);if(h){var s=h.name;void 0!==s&&(n=n||{},n[s]=h,i.call(n[s],t,d,e[s]||e))}}d=!1}.bind(this)),n}function a(t,e){Object.keys(t).forEach(function(n){t[n].run(e)})}function d(t){this._root="string"==typeof t?JSON.parse(t):t}var o={};return t.merge(d,{addDecoder:function(t){void 0===o[t.tagName]&&(o[t.tagName]=t)}}),t.merge(d.prototype,{addDecoder:d.addDecoder,_renderFragment:function(t,n){var i={},d=e(t.template);return t.children&&t.children.length>0&&(i=r.call(this,t,n||{})),a(i,d),{fragment:d,children:i,templateId:t.templateId}},render:function(t){var e=this._renderFragment(this._root,t);return e}}),d});;/*!
 * Mediator.js Library v0.9.8
 * https://github.com/ajacksified/Mediator.js
 *
 * Copyright 2013, Jack Lawson
 * MIT Licensed (http://www.opensource.org/licenses/mit-license.php)
 *
 * For more information: http://thejacklawson.com/2011/06/mediators-for-modularized-asynchronous-programming-in-javascript/index.html
 * Project on GitHub: https://github.com/ajacksified/Mediator.js
 *
 * Last update: October 19 2013
 */

!function(t,n){"function"==typeof define&&define.amd?define("widget/mediator",[],function(){return t.Mediator=n(),t.Mediator}):"undefined"!=typeof exports?exports.Mediator=n():t.Mediator=n()}(this,function(){function t(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function n(e,i,r){return this instanceof n?(this.id=t(),this.fn=e,this.options=i,this.context=r,void(this.channel=null)):new n(e,i,r)}function e(t,n){return this instanceof e?(this.namespace=t||"",this._subscribers=[],this._channels={},this._parent=n,void(this.stopped=!1)):new e(t)}function i(){return this instanceof i?void(this._channels=new e("")):new i}return n.prototype={update:function(t){t&&(this.fn=t.fn||this.fn,this.context=t.context||this.context,this.options=t.options||this.options,this.channel&&this.options&&void 0!==this.options.priority&&this.channel.setPriority(this.id,this.options.priority))}},e.prototype={addSubscriber:function(t,e,i){var r=new n(t,e,i);return e&&void 0!==e.priority?(e.priority=e.priority>>0,e.priority<0&&(e.priority=0),e.priority>=this._subscribers.length&&(e.priority=this._subscribers.length-1),this._subscribers.splice(e.priority,0,r)):this._subscribers.push(r),r.channel=this,r},stopPropagation:function(){this.stopped=!0},getSubscriber:function(t){var n=0,e=this._subscribers.length;for(e;e>n;n++)if(this._subscribers[n].id===t||this._subscribers[n].fn===t)return this._subscribers[n]},setPriority:function(t,n){var e,i,r,s,o=0,a=0;for(a=0,s=this._subscribers.length;s>a&&(this._subscribers[a].id!==t&&this._subscribers[a].fn!==t);a++)o++;e=this._subscribers[o],i=this._subscribers.slice(0,o),r=this._subscribers.slice(o+1),this._subscribers=i.concat(r),this._subscribers.splice(n,0,e)},addChannel:function(t){this._channels[t]=new e((this.namespace?this.namespace+":":"")+t,this)},hasChannel:function(t){return this._channels.hasOwnProperty(t)},returnChannel:function(t){return this._channels[t]},removeSubscriber:function(t){var n=this._subscribers.length-1;if(!t)return void(this._subscribers=[]);for(n;n>=0;n--)(this._subscribers[n].fn===t||this._subscribers[n].id===t)&&(this._subscribers[n].channel=null,this._subscribers.splice(n,1))},publish:function(t){var n,e,i,r=0,s=this._subscribers.length,o=!1;for(s;s>r;r++)o=!1,n=this._subscribers[r],this.stopped||(e=this._subscribers.length,void 0!==n.options&&"function"==typeof n.options.predicate?n.options.predicate.apply(n.context,t)&&(o=!0):o=!0),o&&(n.options&&void 0!==n.options.calls&&(n.options.calls--,n.options.calls<1&&this.removeSubscriber(n.id)),n.fn.apply(n.context,t),i=this._subscribers.length,s=i,i===e-1&&r--);this._parent&&this._parent.publish(t),this.stopped=!1}},i.prototype={getChannel:function(t,n){var e=this._channels,i=t.split(":"),r=0,s=i.length;if(""===t)return e;if(i.length>0)for(s;s>r;r++){if(!e.hasChannel(i[r])){if(n)break;e.addChannel(i[r])}e=e.returnChannel(i[r])}return e},subscribe:function(t,n,e,i){var r=this.getChannel(t||"",!1);return e=e||{},i=i||{},r.addSubscriber(n,e,i)},once:function(t,n,e,i){return e=e||{},e.calls=1,this.subscribe(t,n,e,i)},getSubscriber:function(t,n){var e=this.getChannel(n||"",!0);return e.namespace!==n?null:e.getSubscriber(t)},remove:function(t,n){var e=this.getChannel(t||"",!0);return e.namespace!==t?!1:void e.removeSubscriber(n)},publish:function(t){var n=this.getChannel(t||"",!0);if(n.namespace!==t)return null;var e=Array.prototype.slice.call(arguments,1);e.push(n),n.publish(e)}},i.prototype.on=i.prototype.subscribe,i.prototype.bind=i.prototype.subscribe,i.prototype.emit=i.prototype.publish,i.prototype.trigger=i.prototype.publish,i.prototype.off=i.prototype.remove,i.Channel=e,i.Subscriber=n,i.version="0.9.8",i}),!function(t,n){"function"==typeof define&&define.amd?define("router/MatchBinding",n):"object"==typeof exports?module.exports=n():(t.UrlManager=t.UrlManager||{},t.UrlManager.MatchBinding=n())}(this,function(){function t(n,e){""===e?this.pattern=e=n.replace(/^\(\/\)/g,"").replace(/^\/|$/g,""):(this.pattern=n,e+=n),this.location=e.replace(/\((.*?)\)/g,"$1").replace(/^\/|$/g,"");var i=this.pattern.replace(t.ESCAPE_PARAM,"\\$&").replace(t.OPTIONAL_PARAM,"(?:$1)?").replace(t.NAMED_PARAM,function(t,n){return n?t:"([^/]+)"}).replace(t.SPLAT_PARAM,"(.*?)");this.patternRegExp=new RegExp("^"+i),this.routeHandler=[],this.leaveHandler=[],this.queryHandler=[],this.routes=[]}return t.prototype.onBind=function(){},t.prototype.setOnBind=function(t){this.onBind=t},t.prototype.rebind=function(){void 0!==this.onBind&&this.onBind()},t.prototype.setRoutes=function(t){return this.routes.push(t),this},t.prototype.getRoutes=function(){return this.routes},t.prototype.to=function(t){return this.routeHandler.push(t),this},t.prototype.leave=function(t){return this.leaveHandler.push(t),this},t.prototype.query=function(t){return this.queryHandler.push(t),this},t.prototype.test=function(t){return this.patternRegExp.test(t)},t.prototype.getFragment=function(t){var n=this.applyParams(t);return t.replace(n,"")},t.prototype.applyParams=function(t){var n=this.pattern.replace(/\((.*?)\)/g,"$1").split("/"),e=t.split("/");return e.splice(0,n.length).join("/")},t.prototype.extractParams=function(t){var n=this.patternRegExp.exec(t).slice(1);return n.map(function(t){return t?decodeURIComponent(t):null})},t.prototype.setSubBinder=function(t){return this.subBinder=t,t},t.prototype.getSubBinder=function(){return this.subBinder},t.prototype.getHandler=function(){return this.routeHandler},t.prototype.getLeaveHandler=function(){return this.leaveHandler},t.prototype.getQueryHandler=function(){return this.queryHandler},t.OPTIONAL_PARAM=/\((.*?)\)/g,t.NAMED_PARAM=/(\(\?)?:\w+/g,t.SPLAT_PARAM=/\*\w+/g,t.ESCAPE_PARAM=/[\-{}\[\]+?.,\\\^$|#\s]/g,t}),function(t,n){"function"==typeof define&&define.amd?define("router/MatchBinder",["./MatchBinding"],n):"object"==typeof exports?module.exports=n(require("./MatchBinding")):(t.UrlManager=t.UrlManager||{},t.UrlManager.MatchBinder=n(t.UrlManager.MatchBinding))}(this,function(t){function n(t,n,e,i){this.bindings=[],this.location=i||t||"",this.command=e,this.params=n}return n.prototype.match=function(t,n){var e=this.getMatchBinding(t,this.location);this.bindings.push(e);var i=this.getSubBinder(this.location+t);return e.setSubBinder(i),n&&n(i.match.bind(i)),e},n.prototype.getSubBinder=function(t){return new n(t)},n.prototype.getMatchBinding=function(n,e){return new t(n,e)},n.prototype.filter=function(t){return this.bindings.filter(function(n){return n.test(t)})},n.prototype.run=function(){this.command(this)},n}),function(t,n){"function"==typeof define&&define.amd?define("router/Router",["./MatchBinder"],n):"object"==typeof exports?module.exports=n(require("./MatchBinder")):(t.UrlManager=t.UrlManager||{},t.UrlManager.Router=n(t.UrlManager.MatchBinder))}(this,function(t){function n(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(n){return t}}function e(t,n){var e=t.split("&");e.forEach(function(t){var e=t.split("=");n(e.shift(),e.join("="))})}function i(t,n,e,i){var r,s=e.root.substring(0,e.root.length-i.length);return t=t||"",r=n===!0?this.serialize(e.query):n===!1?"":this.serialize(n),s+t+(0===r.length?"":"?"+r)}function r(){this.root=this.getBinder(),this.bindings=[]}return Array.prototype.equals=function(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,e=this.length;e>n;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!this[n].equals(t[n]))return!1}else if(this[n]!=t[n])return!1;return!0},r.prototype.getBinder=function(){return new t},r.prototype.match=function(t){t(this.root.match.bind(this.root))},r.prototype.trigger=function(t){if(this.started){var i=t.split("?",2),r={};i[1]&&e(i[1],function(t,e){e=n(e),r[t]?"string"==typeof r[t]?r[t]=[r[t],e]:r[t].push(e):r[t]=e});var s=i[0].replace(/^\/|$/g,""),o={root:s,query:r},a=[],u=!1;this.bindings.forEach(function(n){var e,i=n.pattern.replace(/\((.*?)\)/g,"$1").replace(/^\//,"").split("/"),r=n.location.split("/"),p=n.prevLoc.replace(/^\//,"").split("/"),h=function(t){var n=t.splice(r.length-i.length,i.length),e=p.splice(0,i.length);return!n.equals(e)};if(e=h(u||s.split("/"))){u=s.split("/").splice(0,r.length-i.length);var c=n.getLeaveHandler(),l=[];n.setOnBind(),this.applyHandler(c,l,o,t),a.push(n)}}.bind(this)),a.forEach(function(t){this.bindings.splice(this.bindings.indexOf(t),1)}.bind(this)),this.find(this.root,s,o)}},r.prototype.find=function(t,n,e){var i=t.filter(n);i.forEach(this.onBinding.bind(this,n,e))},r.prototype.execute=function(t){var n=t.location.split("/"),e=t.params.root.split("/"),i="/"+e.splice(n.length,e.length-n.length).join("/");this.find(t,i,t.params)},r.prototype.onBinding=function(n,e,i){i.setOnBind(this.onBinding.bind(this,n,e,i)),this.runHandler(n,e,i);var r=i.getFragment(n),s=i.getSubBinder();s&&s.bindings&&s.bindings.length>0&&this.find(s,r,e);var o=i.getRoutes();if(o&&o.length>0)for(;o.length>0;){var a=o[0],u=new t(i.getFragment(n),e,this.execute.bind(this),i.location);a(u),s.bindings=s.bindings.concat(u.bindings),o.shift()}},r.prototype.serialize=function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")},r.prototype.runHandler=function(t,n,e){if(-1===this.bindings.indexOf(e)){var i=e.getHandler(),r=e.extractParams(t);e.prevLoc=t,this.applyHandler(i,r,n,t),this.bindings.push(e)}var i=e.getQueryHandler();if(i){var r=[];this.applyHandler(i,r,n,t)}},r.prototype.applyHandler=function(t,n,e,r){t&&t.length>0&&t.forEach(function(t){t.apply(this,n.concat({getQuery:function(){return e.query},getLocation:function(t,n){return i.call(this,t,n,e,r)}.bind(this)}))}.bind(this))},r.prototype.start=function(){this.started=!0},r.prototype.stop=function(){this.started=!1},r}),define("widget/utils",[],function(){function t(t){var n=typeof t;if(!("function"===n||"object"===n&&t))return t;for(var e,i,r=1,s=arguments.length;s>r;r++){e=arguments[r];for(i in e)t[i]=e[i]}return t}function n(n,e){var i,r=this;i=n&&null!=n&&hasOwnProperty.call(n,"constructor")?n.constructor:function(){return r.apply(this,arguments)},t(i,r,e);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,n&&t(i.prototype,n),i.__super__=r.prototype,i}function e(t){return"[object String]"===toString.call(t)}function i(t){var n=typeof t;return"function"===n||"object"===n&&!!t}function r(t){return"[object Array]"===toString.call(t)}return{fnExtend:n,extend:t,isString:e,isObject:i,isArray:r}}),define("widget/App",["./mediator","router/Router","./utils"],function(t,n,e){function i(t){function n(){var n=window.location.href.match(/#(.*)$/);t.trigger(n?n[1]:"")}t.start(),window.addEventListener("hashchange",n,!1),n()}function r(){var r=new n;this.context=e.extend(this.setContext(),{eventBus:new t}),this.beforeInit.apply(this,arguments),void 0!==this.AppContainer&&(this.appContainer=new this.AppContainer({appContext:this.context}),void 0!==this.appContainer._match&&r.match(this.appContainer._match.bind(this.appContainer)),this.setContext(),this.el=this.appContainer.el,setTimeout(function(){this.el.classList.add("show")}.bind(this),100),i(r)),this.init.apply(this,arguments)}return r.extend=e.fnExtend,e.extend(r.prototype,{beforeInit:function(){},init:function(){},setContext:function(){return{}},start:function(t){t instanceof HTMLElement==!0&&t.appendChild(this.el)}}),r});;define("widget/dom",["./utils"],function(t){function e(e){var n=t.extend({},e);t.extend(this,n)}var n={append:function(t,e,n){e.placeholder=t.el.querySelector("#"+e.id),e.el=e.run(t.el,!0,!1,n)},replace:function(t){t.el.innerHTML="",n.append.apply(this,arguments)},detach:function(t){t&&t.el&&t.el.parentNode&&t.el.parentNode.replaceChild(t.placeholder,t.el)},attach:function(t){t&&t.el&&t.placeholder&&t.placeholder.parentNode&&t.placeholder.parentNode.replaceChild(t.el,t.placeholder)},add:function(t,e,n,i){t.placeholder=e.querySelector("#"+t.id),t.el=t.run(e,!1,n,i)},text:function(t,e){t&&t.el&&(t.el.innerHTML=e)},setAttribute:function(e,n,i){e&&e.el&&(t.isObject(n)?Object.keys(n).forEach(function(t){e.el.setAttribute(t,n[t])}.bind(this)):e.el.setAttribute(n,i))},removeAttribute:function(t,e){t&&t.el&&t.el.removeAttribute(e)},setStyle:function(e,n,i){e&&e.el&&(t.isObject(n)?Object.keys(n).forEach(function(t){e.el.style[t]=n[t]}.bind(this)):e.el.style[n]=i)},removeStyle:function(t,e){t&&t.el&&delete t.el.style[e]},addClass:function(t,e){t&&t.el&&t.el.classList.add(e)},removeClass:function(t,e){t&&t.el&&t.el.classList.remove(e)},val:function(t,e){if(t&&t.el){var n=t.el;if(void 0===e)return n.value;n.value=e}},on:function(t,e,n,i){var a=Array.prototype.slice.call(arguments,4,arguments.length),r=t.el,c=e.split(" "),s=function(e){n.apply(i||this,[e,t].concat(a))};return c.forEach(function(t){r.addEventListener(t,s)}),{remove:function(){c.forEach(function(t){r.removeEventListener(t,s)})}}},remove:function(t){t.el.remove()},Element:e};return t.extend(e.prototype,{append:function(t){n.append(this,t)},replace:function(t,e){n.replace(this,t,e)},text:function(t){n.text(this,t)},add:function(t,e,i){n.add(this,t,e,i)},detach:function(){n.detach(this)},attach:function(){n.attach(this)},setAttribute:function(t,e){n.setAttribute(this,t,e)},removeAttribute:function(t){n.removeAttribute(this,t)},setStyle:function(t,e){n.setStyle(this,t,e)},removeStyle:function(t){n.removeStyle(this,t)},addClass:function(t){n.addClass(this,t)},removeClass:function(t){n.removeClass(this,t)},val:function(t){return n.val(this,t)},on:function(){var t=Array.prototype.slice.call(arguments,0);return n.on.apply(!1,[this].concat(t))},remove:function(){n.remove(this)}}),e.extend=t.fnExtend,n}),function(t,e){"function"==typeof define&&define.amd?define("templating/utils",[],e):"object"==typeof exports?module.exports=e():(t.Templating=t.Templating||{},t.Templating.utils=e())}(this,function(){return{merge:function(t,e){Object.keys(e).forEach(function(n){t[n]=e[n]})}}}),function(t,e){"function"==typeof define&&define.amd?define("templating/Decoder",["templating/utils"],e):"object"==typeof exports?module.exports=e(require("./utils")):(t.Templating=t.Templating||{},t.Templating.Decoder=e(t.Templating.utils))}(this,function(t){function e(t,e){var n;n="li"===e?"ul":"td"===e||"th"===e?"tr":"tr"===e?"tbody":"div";var i=document.createElement(n),a=document.createDocumentFragment();return i.innerHTML=t,a.appendChild(i.firstChild),a.firstChild}function n(t,n,i,a){var r=this.tmpEl(n?t:!1,a),c=this.data.attribs,s=e(this.template,this.data.tag);if(n||Object.keys(c).forEach(function(t){r.setAttribute(t,c[t])}),void 0!==s)for(;s.childNodes.length>0;)r.appendChild(s.childNodes[0]);if(i)this.setParent(i),null!==this.parent&&this.parent.appendChild(r);else{var l=t.parentNode;this.setParent(l),(null!==this.parent||void 0!==this.parent)&&this.parent.replaceChild(r,t)}return this.el=r,void 0!==this.parse&&this.parse(r),r}function i(e,i,a){var r=e.tagName,c=this;t.merge(c,{id:e.id,template:e.template,noAttach:s[r].noAttach||e.data.tplSet.noattach,applyAttach:function(){delete this.noAttach},setParent:function(t){this.parent=t}.bind(c),getParent:function(){return this.parent}.bind(c),run:function(t,e,i,r){if(void 0===this.noAttach){var s=t.querySelector("#"+this.id)||t;if(s)return n.call(c,s,e,i,r||a)}}}),i&&(this.children=i)}function a(t,e){e||(e={});var n=!1,c=!1;return t.children.forEach(function(t){if(t.children&&t.children.length>0){var l=e[t.data.name]?e[t.data.name]:e;c=a.call(this,t,l)}var o=t.tagName;if(o){var h=s[o].decode(t,c,r);if(h){var d=h.name;void 0!==d&&(n=n||{},n[d]=h,i.call(n[d],t,c,e[d]||e))}}c=!1}.bind(this)),n}function r(t,e){Object.keys(t).forEach(function(n){t[n].run(e)})}function c(t){this._root="string"==typeof t?JSON.parse(t):t}var s={};return t.merge(c,{addDecoder:function(t){void 0===s[t.tagName]&&(s[t.tagName]=t)}}),t.merge(c.prototype,{addDecoder:c.addDecoder,_renderFragment:function(t,n){var i={},c=e(t.template);return t.children&&t.children.length>0&&(i=a.call(this,t,n||{})),r(i,c),{fragment:c,children:i,templateId:t.templateId}},render:function(t){var e=this._renderFragment(this._root,t);return e}}),c}),function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("watch",t):(window.WatchJS=t(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){function t(){O=null;for(var t=0;t<j.length;t++)j[t]();j.length=0}var e={noMore:!1,useDirtyCheck:!1},n=[],i=[],a=[],r=!1;try{r=Object.defineProperty&&Object.defineProperty({},"x",{})}catch(c){}var s=function(t){var e={};return t&&"[object Function]"==e.toString.call(t)},l=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=function(t){return"[object Object]"==={}.toString.apply(t)},h=function(t,e){var n=[],i=[];if("string"!=typeof t&&"string"!=typeof e){if(l(t))for(var a=0;a<t.length;a++)void 0===e[a]&&n.push(a);else for(var a in t)t.hasOwnProperty(a)&&void 0===e[a]&&n.push(a);if(l(e))for(var r=0;r<e.length;r++)void 0===t[r]&&i.push(r);else for(var r in e)e.hasOwnProperty(r)&&void 0===t[r]&&i.push(r)}return{added:n,removed:i}},d=function(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var n in t)e[n]=t[n];return e},u=function(t,e,n,i){try{Object.observe(t,function(t){t.forEach(function(t){t.name===e&&i(t.object[t.name])})})}catch(a){try{Object.defineProperty(t,e,{get:n,set:function(t){i.call(this,t,!0)},enumerable:!0,configurable:!0})}catch(r){try{Object.prototype.__defineGetter__.call(t,e,n),Object.prototype.__defineSetter__.call(t,e,function(t){i.call(this,t,!0)})}catch(c){p(t,e,i)}}}},f=function(t,e,n){try{Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!1,value:n})}catch(i){t[e]=n}},p=function(t,e,n){i[i.length]={prop:e,object:t,orig:d(t[e]),callback:n}},v=function(){s(arguments[1])?m.apply(this,arguments):l(arguments[1])?b.apply(this,arguments):g.apply(this,arguments)},m=function(t,e,n,i){if("string"!=typeof t&&(t instanceof Object||l(t))){if(l(t)){if(k(t,"__watchall__",e,n),void 0===n||n>0)for(var a=0;a<t.length;a++)m(t[a],e,n,i)}else{var a,c=[];for(a in t)"$val"==a||!r&&"watchers"===a||Object.prototype.hasOwnProperty.call(t,a)&&c.push(a);b(t,c,e,n,i)}i&&F(t,"$$watchlengthsubjectroot",e,n)}},b=function(t,e,n,i,a){if("string"!=typeof t&&(t instanceof Object||l(t)))for(var r=0;r<e.length;r++){var c=e[r];g(t,c,n,i,a)}},g=function(t,e,n,i,a){"string"!=typeof t&&(t instanceof Object||l(t))&&(s(t[e])||(null!=t[e]&&(void 0===i||i>0)&&m(t[e],n,void 0!==i?i-1:i),k(t,e,n,i),a&&(void 0===i||i>0)&&F(t,e,n,i)))},y=function(){s(arguments[1])?w.apply(this,arguments):l(arguments[1])?_.apply(this,arguments):B.apply(this,arguments)},w=function(t,e){if(!(t instanceof String)&&(t instanceof Object||l(t)))if(l(t)){for(var n=["__watchall__"],i=0;i<t.length;i++)n.push(i);_(t,n,e)}else{var a=function(t){var n=[];for(var i in t)t.hasOwnProperty(i)&&(t[i]instanceof Object?a(t[i]):n.push(i));_(t,n,e)};a(t)}},_=function(t,e,n){for(var i in e)e.hasOwnProperty(i)&&B(t,e[i],n)},j=[],O=null,E=function(){return O||(O=setTimeout(t)),O},x=function(t){null==O&&E(),j[j.length]=t},A=function(){var t=s(arguments[2])?S:C;t.apply(this,arguments)},C=function(t,e,n,i){var a,r=null,c=-1,s=l(t),o=function(n,i,a,l){var o=E();if(c!==o&&(c=o,r={type:"update"},r.value=t,r.splices=null,x(function(){e.call(this,r),r=null})),s&&t===this&&null!==r){if("pop"===i||"shift"===i)a=[],l=[l];else if("push"===i||"unshift"===i)a=[a],l=[];else if("splice"!==i)return;r.splices||(r.splices=[]),r.splices[r.splices.length]={index:n,deleteCount:l?l.length:0,addedCount:a?a.length:0,added:a,deleted:l}}};a=1==n?void 0:0,m(t,o,a,i)},S=function(t,e,n,i,a){t&&e&&(g(t,e,function(t,e,r,c){var s={type:"update"};s.value=r,s.oldvalue=c,(i&&o(r)||l(r))&&C(r,n,i,a),n.call(this,s)},0),(i&&o(t[e])||l(t[e]))&&C(t[e],n,i,a))},k=function(t,n,i,a){var r=!1,c=l(t);t.watchers||(f(t,"watchers",{}),c&&T(t,function(e,i,r,c){if(L(t,e,i,r,c),0!==a&&r&&(o(r)||l(r))){var s,h,d,u,f=t.watchers[n];for((u=t.watchers.__watchall__)&&(f=f?f.concat(u):u),d=f?f.length:0,s=0;d>s;s++)if("splice"!==i)m(r,f[s],void 0===a?a:a-1);else for(h=0;h<r.length;h++)m(r[h],f[s],void 0===a?a:a-1)}})),t.watchers[n]||(t.watchers[n]=[],c||(r=!0));for(var s=0;s<t.watchers[n].length;s++)if(t.watchers[n][s]===i)return;if(t.watchers[n].push(i),r){var h=t[n],d=function(){return h},v=function(i,r){var c=h;if(h=i,0!==a&&t[n]&&(o(t[n])||l(t[n]))&&!t[n].watchers){var s,d=t.watchers[n].length;for(s=0;d>s;s++)m(t[n],t.watchers[n][s],void 0===a?a:a-1)}return W(t,n)?void q(t,n):void(e.noMore||c!==i&&(r?L(t,n,"set",i,c):R(t,n,"set",i,c),e.noMore=!1))};e.useDirtyCheck?p(t,n,v):u(t,n,d,v)}},R=function(t,e,n,i,a){if(void 0!==e){var r,c,s=t.watchers[e];(c=t.watchers.__watchall__)&&(s=s?s.concat(c):c),r=s?s.length:0;for(var l=0;r>l;l++)s[l].call(t,e,n,i,a)}else for(var e in t)t.hasOwnProperty(e)&&R(t,e,n,i,a)},P=["pop","push","reverse","shift","sort","slice","unshift","splice"],N=function(t,e,n,i){f(t,n,function(){var a,r,c,s,l=0;if("splice"===n){var o=arguments[0],h=o+arguments[1];for(c=t.slice(o,h),r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];l=o}else r=arguments.length>0?arguments[0]:void 0;return s=e.apply(t,arguments),"slice"!==n&&("pop"===n?(c=s,l=t.length):"push"===n?l=t.length-1:"shift"===n?c=s:"unshift"!==n&&void 0===r&&(r=s),i.call(t,l,n,r,c)),s})},T=function(t,e){if(s(e)&&t&&!(t instanceof String)&&l(t))for(var n,i=P.length;i--;)n=P[i],N(t,t[n],n,e)},B=function(t,e,n){if(void 0===n&&t.watchers[e])delete t.watchers[e];else for(var i=0;i<t.watchers[e].length;i++){var a=t.watchers[e][i];a==n&&t.watchers[e].splice(i,1)}H(t,e,n),G(t,e)},D=function(t,e){if(t.watchers){var n="__wjs_suspend__"+(void 0!==e?e:"");t.watchers[n]=!0}},W=function(t,e){return t.watchers&&(t.watchers.__wjs_suspend__||t.watchers["__wjs_suspend__"+e])},q=function(t,e){x(function(){delete t.watchers.__wjs_suspend__,delete t.watchers["__wjs_suspend__"+e]})},I=null,L=function(t,e,n,i,r){a[a.length]={obj:t,prop:e,mode:n,newval:i,oldval:r},null===I&&(I=setTimeout($))},$=function(){var t=null;I=null;for(var e=0;e<a.length;e++)t=a[e],R(t.obj,t.prop,t.mode,t.newval,t.oldval);t&&(a=[],t=null)},M=function(){for(var t=0;t<n.length;t++){var e=n[t];if("$$watchlengthsubjectroot"===e.prop){var a=h(e.obj,e.actual);(a.added.length||a.removed.length)&&(a.added.length&&b(e.obj,a.added,e.watcher,e.level-1,!0),e.watcher.call(e.obj,"root","differentattr",a,e.actual)),e.actual=d(e.obj)}else{var a=h(e.obj[e.prop],e.actual);if(a.added.length||a.removed.length){if(a.added.length)for(var r=0;r<e.obj.watchers[e.prop].length;r++)b(e.obj[e.prop],a.added,e.obj.watchers[e.prop][r],e.level-1,!0);R(e.obj,e.prop,"differentattr",a,e.actual)}e.actual=d(e.obj[e.prop])}}var c,s;if(i.length>0)for(var t=0;t<i.length;t++)c=i[t],s=c.object[c.prop],J(c.orig,s)||(c.orig=d(s),c.callback(s))},J=function(t,e){var n,i=!0;if(t!==e)if(o(t)){for(n in t)if((r||"watchers"!==n)&&t[n]!==e[n]){i=!1;break}}else i=!1;return i},F=function(t,e,i,a){var r;r=d("$$watchlengthsubjectroot"===e?t:t[e]),n.push({obj:t,prop:e,actual:r,watcher:i,level:a})},H=function(t,e,i){for(var a=0;a<n.length;a++){var r=n[a];r.obj==t&&r.prop==e&&r.watcher==i&&n.splice(a,1)}},G=function(t,e){for(var n,a=0;a<i.length;a++){var r=i[a],c=r.object.watchers;n=r.object==t&&r.prop==e&&c&&(!c[e]||0==c[e].length),n&&i.splice(a,1)}};return setInterval(M,50),e.watch=v,e.unwatch=y,e.callWatchers=R,e.suspend=D,e.onChange=A,e}),define("widget/parsers/applyAttribute",["watch"],function(t){function e(t,e){var i=t.data.tplSet.bind,a=t.data.tplSet.update;i&&Object.keys(i).forEach(function(r){var c=i[r];if(void 0!==e[c])if("class"===r){t.addClass(e[c]);var s=e[c];"true"===a&&n(e,c,function(){t.removeClass(s),t.addClass(e[c]),s=e[c]}.bind(this))}else"checked"===r?(t.el.checked=e[c],"true"===a&&n(e,c,function(){t.el.checked=e[c]}.bind(this))):(t.setAttribute(r,e[c]),"true"===a&&n(e,c,function(){t.setAttribute(r,e[c])}.bind(this)));void 0!==e.text&&(t.text(e.text),"true"===a&&n(e,"text",function(){t.text(e.text)}.bind(this)))})}{var n=t.watch;t.unwatch,t.callWatchers}return e}),define("widget/parsers/applyEvents",[],function(){function t(t,e,n){void 0!==e&&void 0!==t.el&&e.forEach(function(e){t.on(e.name,e.action,this,n)}.bind(this))}return t}),define("widget/parsers/setBinders",[],function(){function t(t){var e=!1;return Object.keys(t).forEach(function(n){e=e||{};var i=t[n];void 0!==i.bind&&(e[i.bind]=e[i.bind]||[],e[i.bind].push(i))}.bind(this)),e}return t}),define("widget/parsers/deepBindings",["./setBinders"],function(t){function e(n){return Object.keys(n).forEach(function(i){var a=n[i];a.children&&(n[i].children=e(a.children),n[i].bindings=t(a.children))}),n}return e}),define("widget/parsers/setChildren",["../dom","./applyEvents","./setBinders","./deepBindings"],function(t,e,n,i){function a(e){return Object.keys(e).forEach(function(n){e[n]instanceof t.Element!=!0&&(e[n]=new t.Element(e[n])),e[n].children&&(e[n].children=a(e[n].children))}.bind(this)),e}function r(t,c){return c=c?a(c):{},t=t?a(t):{},Object.keys(t).forEach(function(a){var s=t[a].children;void 0!==s&&(s=r.call(this,s,c.children),t[a].bindings=n(s));var l=t[a],o=c[a];void 0!==o?(void 0!==o.children&&(o.bindings=i(o.children)),void 0!==this.nodes[a]?this.nodes[a].call(this,l,o):void 0!==l&&(l.replace(o),void 0!==o.children&&(l.children=o.children))):void 0!==this.nodes[a]&&"true"===l.data.tplSet.noattach&&this.nodes[a].call(this,l),void 0!==this.elReady[a]&&void 0!==l.el&&this.elReady[a].call(this,l);var h=this.events[a];e.call(this,l,h)}.bind(this)),t}return r}),define("widget/parsers/applyBinders",["../dom","../utils","watch","./applyEvents","./applyAttribute"],function(t,e,n,i,a){function r(n,s){var l=s.bindings,o=s.el;n&&Object.keys(n).forEach(function(s){if(void 0!==l&&void 0!==l[s]){var h=function(l){var h=this.events[l.name];if(void 0!==l){var d=n[s];if(l.applyAttach(),this.nodes[s]){var u=new t.Element(l);this.nodes[s].call(this,u,o,d)}else if(e.isArray(d)||e.isObject(d)){if(e.isArray(d)){l.applyAttach();var f=function(){var e=!1,u=[],f=function(n){var c=new t.Element(l);e?c.add(o,e):(c.add(o),e=l.getParent()),this.elReady[c.name]&&this.elReady[c.name].call(this,c,n),a.call(this,c,n),r.call(this,n,c),i.call(this,c,h,n),u.push({binder:c,data:n})};d.forEach(f.bind(this));var p=l.data.tplSet.update;if("true"===p){var v=["pop","shift","splice"];c(n,s,function(t,e,i,a){void 0===a&&"push"==e?f.call(this,i[0]):-1!==v.indexOf(e)&&u.forEach(function(t,e){-1===n[s].indexOf(t.data)&&(t.binder.remove(),u.splice(e,1))}.bind(this))}.bind(this))}};f.call(this)}else if(e.isObject(d)){var u=new t.Element(l);u.add(o),this.elReady[u.name]&&this.elReady[u.name].call(this,u,d),i.call(this,u,h,d),"cp"===l.data.type?u.replace(l,d):u.data.tplSet.bind?a.call(this,u,d):r.call(this,d,u)}}else{var u=new t.Element(l);u.add(o),u.text(d),void 0!==this.elReady[u.name]&&this.elReady[u.name].call(this,u,d),"true"===u.data.tplSet.update&&c(n,s,function(){u.text(n[s])}.bind(this)),i.call(this,u,h,d)}}};void 0!==l[s].forEach?l[s].forEach(h.bind(this)):h.call(this,l[s])}}.bind(this))}{var c=n.watch;n.unwatch,n.callWatchers}return r}),define("widget/parsers/setRoutes",[],function(){function t(t){t.data.instance&&delete t.data.instance,t.el&&(t.el.remove(),delete t.el)}function e(t,e){void 0!==t&&Object.keys(t).forEach(function(n){var i=t[n];e.call(this,i,i.data.instance)}.bind(this))}function n(i,a,r){var c=Object.keys(i);c.forEach(function(c){var s=i[c],l=s.data.route;if(void 0!==l&&"cp"!==s.data.type){var o=a(l,function(t){void 0!==s.children&&n.call(this,s.children,t,r)}.bind(this));o.to(function(){var n=[].slice.call(arguments,0),i=n.pop();if(n.length>0)var a=n.join("_");void 0!==s.el&&s.sessId!==a&&void 0!==a&&(e.call(this,s.children,t),t(s)),e.call(this,s.children,function(t,e){var a=t.data,r=a.dataset;r.params=i,n.length>0&&(r.link=n,e&&e.to&&e.to.apply(e,n.concat(i)))}),void 0===s.el?(s.applyAttach(),s.add(r,!1),e.call(this,s.children,function(t,e){e&&e.to&&e.to.apply(e,n.concat(i)),!t.el&&e&&e._match&&(o.setRoutes(function(t){e._match.call(e,t.match.bind(t)),t.run()}.bind(this)),e._reRoute=function(){e._applyRoutes(o)})}),a&&(s.sessId=a)):s.attach()}.bind(this)),o.leave(function(){e.call(this,s.children,function(t,e){e&&void 0!==e.leave&&e.leave()}.bind(this)),s.detach()}.bind(this)),o.query(function(t){e.call(this,s.children,function(e,n){n&&void 0!==n.query&&n.query(t)}.bind(this))}.bind(this))}else if(void 0!==s.children&&"cp"!==s.data.type)n.call(this,s.children,a,r);else if("cp"===s.data.type&&s.data.instance){var h=s.data.instance;h._match.call(h,a)}}.bind(this))}function i(t){if(!this._match){var e=this.el;this._match=function(i){n.call(this,t,i,e),this.match&&this.match.call(this,i)}.bind(this)}}return i}),define("widget/Constructor",["./dom","./utils","./mediator","templating/Decoder","./parsers/applyAttribute","./parsers/setChildren","./parsers/applyBinders","./parsers/setBinders","./parsers/setRoutes","./parsers/applyEvents"],function(t,e,n,i,a,r,c,s,l,o){function h(t,a,c){if(this._routes=[],this.children={},this.eventBus=new n,this.context=d,void 0!==t.appContext&&e.extend(this.context,t.appContext),this.beforeInit.apply(this,arguments),this.template){var o=c?Object.keys(c):[];this.data=o.length>0?c:this.context.data[t.bind];var h=new i(this.template),u=h.render(this.data);this.el=u.fragment,this.children=e.extend(r.call(this,u.children,a),this.children),this.bindings=s.call(this,this.children),this.routes=l.call(this,this.children),this.data&&this.applyBinders(this.data,this)}else this.el=document.createElement("div");this.init.apply(this,arguments)}var d={};return e.extend(h.prototype,{nodes:{},events:{},elReady:{},init:function(){},beforeInit:function(){},applyBinders:c,destroy:function(){this.el.remove()},setRoutes:function(t){void 0!==t&&this._routes.push(t)},_applyRoutes:function(t){for(;this._routes.length>0;){var e=this._routes[0];e&&e._match&&t.setRoutes(function(t){e._match.call(e,t.match.bind(t)),t.run()}.bind(this)),this._routes.shift()}t.rebind()},_reRoute:function(){},rebind:function(){this._reRoute()},setChildren:function(e,n){var i=e.name;void 0!==this.children[i]&&void 0!==this.children[i].el&&this.children[i].detach(),e.applyAttach(),this.children[i]=new t.Element(e),this.children[i].placeholder=this.el.querySelector("#"+e.id),this.children[i].el=e.run(this.el,!1,!1,n),void 0!==this.elReady[i]&&void 0!==this.children[i].el&&this.elReady[i].call(this,this.children[i]);var a=this.events[i];o.call(this,this.children[i],a);var r=this.children[i].data.instance;this.setRoutes(r),this.rebind()}}),h.extend=e.fnExtend,h});;!function(){function e(e,t){for(var n=0;n<e.length;n++){var r=e[n];0==r.name.indexOf("data-")&&r.name.length>5&&(t[r.name.substr(5)]=r.value)}return t}function t(){var t={},n=document.getElementsByTagName("script");if(n.length>0)for(var r=0;r<n.length;r++){var a=n[r],o=a.attributes;e(o,t)}return t}function n(e){void 0!==e.name&&require([e.name],function(t){var n=e.target?document.querySelector(e.target):document.body,r=new t;r.start(n)})}document.addEventListener("DOMContentLoaded",function(){n(t())},!1)}();